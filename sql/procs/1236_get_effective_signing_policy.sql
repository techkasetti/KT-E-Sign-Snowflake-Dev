-- Resolve effective policy for a request by account and request metadata. @31 @24 @52
CREATE OR REPLACE PROCEDURE DOCGEN.GET_EFFECTIVE_SIGNING_POLICY(account_id STRING)
RETURNS VARIANT
LANGUAGE SQL
AS
$$ SELECT OBJECT_AGG(POLICY_ID, PARSE_JSON(OBJECT_CONSTRUCT(*))) FROM DOCGEN.SIGNING_POLICIES WHERE ACCOUNT_ID = :account_id;
$$;

