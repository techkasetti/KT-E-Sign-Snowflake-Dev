CREATE OR REPLACE PROCEDURE DOCGEN.UPSERT_FEATURE_TOGGLE(toggle_id STRING, name STRING, scope VARIANT, enabled BOOLEAN)
RETURNS VARIANT
LANGUAGE SQL
AS
$$
MERGE INTO DOCGEN.FEATURE_TOGGLES t USING (SELECT :toggle_id AS tid, :name AS nm, :scope AS sc, :enabled AS en) s ON t.TOGGLE_ID = s.tid WHEN MATCHED THEN UPDATE SET NAME = s.nm, SCOPE = s.sc, ENABLED = s.en WHEN NOT MATCHED THEN INSERT (TOGGLE_ID, NAME, SCOPE, ENABLED) VALUES (s.tid, s.nm, s.sc, s.en);
$$

