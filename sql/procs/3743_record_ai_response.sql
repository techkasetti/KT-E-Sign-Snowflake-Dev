CREATE OR REPLACE PROCEDURE DOCGEN.RECORD_AI_RESPONSE(req_id STRING, response VARIANT)
RETURNS VARIANT
LANGUAGE SQL
AS
$$
INSERT INTO DOCGEN.AI_RESPONSES (RESP_ID, REQ_ID, RESPONSE) VALUES (UUID_STRING(), :req_id, :response);
UPDATE DOCGEN.AI_REQUESTS SET STATUS = 'COMPLETED' WHERE REQ_ID = :req_id;
$$

