CREATE OR REPLACE PROCEDURE DOCGEN.SET_SYSTEM_SETTING(name STRING, value VARIANT)
RETURNS VARIANT
LANGUAGE SQL
AS
$$
MERGE INTO DOCGEN.SYSTEM_SETTINGS t USING (SELECT :name AS n, :value AS v) s ON t.NAME = s.n WHEN MATCHED THEN UPDATE SET VALUE = s.v, UPDATED_AT = CURRENT_TIMESTAMP() WHEN NOT MATCHED THEN INSERT (SETTING_ID, NAME, VALUE) VALUES (UUID_STRING(), s.n, s.v);
$$;

