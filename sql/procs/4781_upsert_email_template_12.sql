CREATE OR REPLACE PROCEDURE DOCGEN.UPSERT_EMAIL_TEMPLATE_12(template_id STRING, name STRING, subject STRING, body CLOB)
RETURNS VARIANT
LANGUAGE SQL
AS
$$
MERGE INTO DOCGEN.EMAIL_TEMPLATES_12 t USING (SELECT :template_id AS tid, :name AS nm, :subject AS sb, :body AS bd) s ON t.TEMPLATE_ID = s.tid WHEN MATCHED THEN UPDATE SET NAME = s.nm, SUBJECT = s.sb, BODY = s.bd, UPDATED_AT = CURRENT_TIMESTAMP() WHEN NOT MATCHED THEN INSERT (TEMPLATE_ID, NAME, SUBJECT, BODY) VALUES (s.tid, s.nm, s.sb, s.bd);
$$

