CREATE OR REPLACE PROCEDURE DOCGEN.SET_ADMIN_SETTING(key STRING, value VARIANT)
RETURNS VARIANT
LANGUAGE SQL
AS
$$ MERGE INTO DOCGEN.ADMIN_SETTINGS t USING (SELECT :key AS k, :value AS v) s ON t.SETTING_KEY = s.k WHEN MATCHED THEN UPDATE SET SETTING_VALUE = s.v, UPDATED_AT = CURRENT_TIMESTAMP() WHEN NOT MATCHED THEN INSERT (SETTING_KEY, SETTING_VALUE) VALUES (s.k, s.v); $$;

