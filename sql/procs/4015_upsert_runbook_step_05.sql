CREATE OR REPLACE PROCEDURE DOCGEN.UPSERT_RUNBOOK_STEP_05(step_id STRING, title STRING, body CLOB)
RETURNS VARIANT
LANGUAGE SQL
AS
$$
MERGE INTO DOCGEN.RUNBOOK_STEPS_05 t USING (SELECT :step_id AS sid, :title AS ttl, :body AS bd) s ON t.STEP_ID = s.sid WHEN MATCHED THEN UPDATE SET TITLE = s.ttl, BODY = s.bd, UPDATED_AT = CURRENT_TIMESTAMP() WHEN NOT MATCHED THEN INSERT (STEP_ID, TITLE, BODY) VALUES (s.sid, s.ttl, s.bd);
$$

