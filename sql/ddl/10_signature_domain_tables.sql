Purpose: core domain tables for signatures, evidence, PKI and activation audit (complete CREATE TABLE statements). These tables implement the evidence/pki/audit schema patterns required by the Eâ€‘Signature design and are intended to be run before registering procedures and tasks @151 @302.  
-- 10_signature_domain_tables.sql  
CREATE OR REPLACE TABLE DOCGEN.SIGNATURE_REQUESTS( REQUEST_ID STRING PRIMARY KEY, DOCUMENT_ID STRING, ACCOUNT_ID STRING, TEMPLATE_ID STRING, CREATED_AT TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP(), STATUS STRING );  
CREATE OR REPLACE TABLE DOCGEN.SIGNATURE_EVENTS( EVENT_ID STRING PRIMARY KEY, REQUEST_ID STRING, SIGNER_ID STRING, EVENT_TYPE STRING, EVENT_TS TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP(), META VARIANT );  
CREATE OR REPLACE TABLE DOCGEN.SIGNERS( SIGNER_ID STRING PRIMARY KEY, SIGNER_NAME STRING, EMAIL STRING, CREATED_AT TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP() );  
CREATE OR REPLACE TABLE DOCGEN.EVIDENCE_BUNDLE( BUNDLE_ID STRING PRIMARY KEY, DOCUMENT_ID STRING, ACCOUNT_ID STRING, ARCHIVE_LOCATION STRING, BUNDLE_HASH STRING, METADATA VARIANT, CREATED_AT TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP() );  
CREATE OR REPLACE TABLE DOCGEN.EVIDENCE_EXPORT_MANIFEST( MANIFEST_ID STRING PRIMARY KEY, S3_PATH STRING, ROW_COUNT NUMBER, EXPORT_TS TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP() );  
CREATE OR REPLACE TABLE DOCGEN.EVIDENCE_RECONCILIATION( RECON_ID STRING PRIMARY KEY, MANIFEST_ID STRING, EXPECTED_ROWS NUMBER, ACTUAL_ROWS NUMBER, STATUS STRING, CHECKED_AT TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP() );  
CREATE OR REPLACE TABLE DOCGEN.PKI_CERTIFICATE_STORE( CERT_ID STRING PRIMARY KEY, CERT_PEM STRING, SUBJECT STRING, ISSUER STRING, SERIAL_NUMBER STRING, FINGERPRINT STRING, NOT_BEFORE TIMESTAMP_LTZ, NOT_AFTER TIMESTAMP_LTZ, CREATED_AT TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP() );  
CREATE OR REPLACE TABLE DOCGEN.PKI_OCSP_STATUS( OCSP_ID STRING PRIMARY KEY, CERT_FINGERPRINT STRING, OCSP_RESPONSE VARIANT, STATUS STRING, CHECKED_AT TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP() );  
CREATE OR REPLACE TABLE DOCGEN.ACTIVATION_AUDIT( AUDIT_ID STRING PRIMARY KEY, ACCOUNT_ID STRING, ACTION STRING, PERFORMED_BY STRING, DETAILS VARIANT, CREATED_AT TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP() );  
CREATE OR REPLACE TABLE DOCGEN.INTEGRATION_KEYS( KEY_ID STRING PRIMARY KEY, ACCOUNT_ID STRING, KEY_HASH STRING, CREATED_AT TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP(), EXPIRES_AT TIMESTAMP_LTZ );  
CREATE OR REPLACE TABLE DOCGEN.PURGE_AUDIT( PURGE_ID STRING PRIMARY KEY, ENTITY_NAME STRING, ROWS_PURGED NUMBER, CUT_OFF TIMESTAMP_LTZ, EXECUTED_AT TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP() );  
CREATE OR REPLACE TABLE DOCGEN.ALERTS( ALERT_ID STRING PRIMARY KEY, ALERT_TYPE STRING, PAYLOAD VARIANT, SEVERITY STRING, RESOLVED BOOLEAN DEFAULT FALSE, ALERT_TS TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP(), RESOLVED_AT TIMESTAMP_LTZ );  

